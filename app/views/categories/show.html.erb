<div class="row mb-3">
  <div class="col-12 col-md-6">
    <h3><%= @category.title %></h3> 
    <% if @category.parent.present? %> 
      in <%= link_to @category.parent&.full_title, 
              category_path(@category.parent.slug), 
              class: "link-purple-soft", 
              data: { turbolinks: false } %>
      <br />
    <% end %>
    <div class="text-secondary">
      <%= @category.description %>
    </div>
  </div>
  
  <div class="d-block d-md-none col-12 col-md-6 text-center mt-3">
    <%= link_to '<i class="fa far fa-sticky-note"></i>'.html_safe,
          new_note_path(params: {category_slug: @category.slug}),
          class: "btn btn-sm btn-purple",
          data: { turbolinks: false }
          %>
    <% if @category.is_a_category? && @category.parent_id.nil? %>
      <%= link_to '<i class="fa fa-folder"></i>'.html_safe,
              new_category_path(params: {parent_slug: @category.slug}),
              class: "btn btn-sm btn-outline-purple",
              data: { turbolinks: false }
              %>
    <% end %>
    <% if @category.is_a_project? %>
      <%= link_to 'EDIT', edit_project_path(@category.slug),
        class: "btn btn-sm btn-warning", data: { turbolinks: false } %>
    <% else %>
      <%= link_to 'EDIT', edit_category_path(@category),
        class: "btn btn-sm btn-warning", data: { turbolinks: false } %>
    <% end %>
  </div>

  <div class="d-none d-md-block col-12 col-md-6 text-right my-auto">
    <%= link_to 'Create Note',
          new_note_path(params: {category_slug: @category.slug}),
          class: "btn btn-sm btn-purple",
          data: { turbolinks: false }
          %>
    <% if @category.is_a_category? && @category.parent_id.nil? %>
      <%= link_to 'Create Subcategory',
              new_category_path(params: {parent_slug: @category.slug}),
              class: "btn btn-sm btn-outline-purple",
              data: { turbolinks: false }
              %>
    <% end %>
    <% if @category.is_a_project? %>
      <%= link_to 'EDIT', edit_project_path(@category.slug),
        class: "btn btn-sm btn-warning", data: { turbolinks: false } %>
    <% else %>
      <%= link_to 'EDIT', edit_category_path(@category),
        class: "btn btn-sm btn-warning", data: { turbolinks: false } %>
    <% end %>
  </div>
</div>

<% if @category.subcategories.any? %>
  <div class="mb-3">
    <% @category.subcategories.sort_by(&:title).each do |subcategory| %>
      <%= link_to subcategory.title, category_path(subcategory.slug), class: "badge badge-purple-outline mb-1", data: { turbolinks: false } %>
    <% end %>
  </div>
<% end %>

<% if @all_notes.any? %>
  <%= render partial: 'notes/notes_list',
    locals: {notes: @all_notes, notes_list: false} %>
<% else %>
  <%= blank_slate(:notes) %>
<% end %>
